extends layout.pug

block content
  -
    const MOST_COMMENTED_MAX_LENGTH = 100;
    const LAST_COMMENT_MAX_LENGTH = 100;

  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p
      | –≠—Ç–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü –±–ª–æ–≥–∞ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å, —á—Ç–æ–±—ã –æ–ø–∏—Å–∞—Ç—å —Å–µ–±—è üëè

    if articles.length
      section(class='main-page__theme-list')
        h2.visually-hidden –°–ø–∏—Å–æ–∫ —Ç–µ–º
        ul.themes
          each category in categories
            li(class='themes__item')
              a(class='themes__item-link' href=`/articles/category/${category.id}`) #{category.name}
                sup #{category.count}
      div(class='main-page__section-flex')
        section(class='main-page__hot hot')
          h2(class='hot__name') –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
            span(class='hot__icon hot__icon--fire')
          if mostCommentedArticles.length
            ul(class='hot__list')
              each article of mostCommentedArticles
                li(class='hot__list-item')
                  a(class='hot__list-link' href=`/articles/${article.id}`) #{cut(article.announce, MOST_COMMENTED_MAX_LENGTH)}
                    sup(class='hot__link-sup') #{article.commentsNumber}
          else
            p –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
        section(class='main-page__last last')
          h2(class='last__name') –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            span(class='last__icon last__icon--cloud')
          if latestComments.length
            ul(class='last__list')
              each comment of latestComments
                li(class='last__list-item')
                  img(class='last__list-image' src=`/img/${comment.User.avatar}` width='20' height='20' alt='–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')
                  b(class='last__list-name') #{`${comment.User.firstName} ${comment.User.lastName}`}
                  a(class='last__list-link' href=`/articles/${comment.articleId}`) #{cut(comment.text, LAST_COMMENT_MAX_LENGTH)}
          else
            p –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...
      section(class='main-page__list preview')
        h2.visually-hidden –°–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π
        ul(class='preview__list')
          each article of articles
            li(class='preview__item')
              ul(class='preview__breadcrumbs')
                each category of article.categories
                  li(class='preview__breadcrumbs-item')
                    a(class='preview__breadcrumbs-link' href=`/articles/category/${category.id}`) #{category.name}
              if article.photo
                div(class='preview__background')
                  img(class='preview__background-image' src=`/img/${article.photo.uniqueName}` width='460' height='240' alt='–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')
              time(class='preview__time' datetime=`${article.createdAt}`) #{formatDate(article.createdAt)}
              h3(class='preview__name')
                a(class='preview__name-link' href=`/articles/${article.id}`) #{article.title}
              p(class='preview__text') #{article.announce}
              a(class='preview__comment' href=`/articles/${article.id}`) –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                span(class='preview__cloud')
                b(class='preview__comment-count') #{article.commentsNumber}
      +pagination(+page, totalPages, 5, `/`)
    else
      .main-page__empty-wrapper
        p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!
